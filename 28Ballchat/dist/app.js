(()=>{let e=null,l={id:Date.now(),color:"#f00",size:100,x:150,y:150},o=[];const n=document.querySelector(".container");function t(l){e.readyState===WebSocket.OPEN&&e.send(JSON.stringify(l))}function a(e){console.log("onBallPropertyUpdate -> e",e),c({[e.target.name]:e.target.value})}function c(e){console.log("updateMyBall -> changes",e),l={...l,...e},t({type:"update",payload:l})}function s(e,l){console.log("updateBallElement -> ball",l),console.log("updateBallElement -> el",e),e.style.top=l.y-l.size/2+"px",e.style.left=l.x-l.size/2+"px",e.style.height=l.size+"px",e.style.width=l.size+"px",e.style.backgroundColor=l.color}document.querySelector("#ballColorPicker").addEventListener("change",a),document.querySelector("#ballSizePicker").addEventListener("change",a),n.addEventListener("click",(function(e){c({x:e.x,y:e.y})})),function a(){e=new WebSocket("wss://fep-app.herokuapp.com/"),e.onopen=()=>{var e;e=l,console.log("addBall -> ball",e),t({type:"add",payload:e})},e.onmessage=e=>{const l=JSON.parse(e.data);switch(console.log("socket.onmessage -> e.data",e.data),l.type){case"add":return t=l.payload,console.log("pushBall -> ball",t),o.push(t),function(e){console.log("renderBall -> ball",e);const l=function(e){console.log("createBallElement -> ball",e);const l=document.createElement("div");return l.className="circle",s(l,e),l}(e);e.el=l,n.append(l)}(t),void console.log("pushBall -> ball",t);case"update":return function(e){console.log("updateBall -> ball",e);const l=o.find((l=>l.id===e.id));l&&(s(l.el,e),console.log("updateBall -> renderedBall.el",l.el))}(l.payload)}var t},e.onclose=()=>{a(),console.log("closed")},e.onerror=e=>{console.log("ðŸš€ ~ initConnection ~ err",e)}}()})();